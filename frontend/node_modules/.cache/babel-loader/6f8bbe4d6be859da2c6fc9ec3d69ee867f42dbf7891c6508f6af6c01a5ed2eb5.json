{"ast":null,"code":"var _jsxFileName = \"/home/robo/eConsult-Insight/frontend/src/GetLink.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport './App.css';\nimport DashBoard from \"./dashboard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GetLink = () => {\n  _s();\n  const [link, setLink] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [result, setresult] = useState(null);\n  const [error, setError] = useState(null);\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (!link) {\n      setError(\"Please enter a valid link.\");\n      return;\n    }\n    setError(null);\n    setIsProcessing(true);\n    setresult(null);\n    console.log(\"Submitting link for analysis:\", link);\n    const formData = new FormData();\n    formData.append(\"text\", link);\n    try {\n      const endpoint = \"http://0.0.0.0:8000/upload/\";\n      const response = await fetch(endpoint, {\n        method: \"POST\",\n        body: formData\n      });\n      if (response.ok) {\n        console.log(\"Link submitted successfully. Awaiting processing.\");\n      } else {\n        const errorText = await response.text();\n        throw new Error(`Server failed to process link: ${errorText}`);\n      }\n    } catch (err) {\n      console.error(\"Submission error:\", err);\n      setError(`Failed to submit link. Please check your network. (${err.message})`);\n      setIsProcessing(false); // Stop processing state on failure\n    }\n  };\n  useEffect(() => {\n    if (isProcessing) {\n      const fetchProcessedResult = async () => {\n        try {\n          const response = await fetch('http://0.0.0.0:8000/result/');\n          if (!response.ok) {\n            throw new Error(`Failed to fetch processed result: ${response.statusText}`);\n          }\n          const result = await response.json();\n\n          // 'result' is a JSON file like: \n          // {wordcount:{word:count}, sentiment:{+:val, -:val, 0:val}, important_rare:[comment1,...]}\n          setresult(result);\n          setIsProcessing(false);\n          console.log(\"Structured data fetched:\", result);\n        } catch (err) {\n          console.error('Error fetching structured data:', err);\n          setError(`Error retrieving result. Expected JSON data but received an error: ${err.message}`);\n          setIsProcessing(false);\n        }\n      };\n      fetchProcessedResult();\n    }\n  }, [isProcessing]);\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setIsProcessing(false);\n          setError(null);\n          setLink('');\n        },\n        children: \"Try Again\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this);\n  }\n  if (isProcessing) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"processing\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Please wait while we process your comments...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this);\n  }\n  if (result) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(DashBoard, {\n        obj: result\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \" Paste the link of website that has the comments \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"textbox\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"url\",\n          value: link,\n          onChange: e => setLink(e.target.value),\n          placeholder: \"e.g., https://example.com/page-with-comments\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Analyze Comments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n};\n_s(GetLink, \"/Yr+NrMyMgONwMw8KP42pMpaO2c=\");\n_c = GetLink;\nexport default GetLink;\nvar _c;\n$RefreshReg$(_c, \"GetLink\");","map":{"version":3,"names":["useState","useEffect","DashBoard","jsxDEV","_jsxDEV","GetLink","_s","link","setLink","isProcessing","setIsProcessing","result","setresult","error","setError","handleSubmit","event","preventDefault","console","log","formData","FormData","append","endpoint","response","fetch","method","body","ok","errorText","text","Error","err","message","fetchProcessedResult","statusText","json","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","obj","onSubmit","type","value","onChange","e","target","placeholder","required","_c","$RefreshReg$"],"sources":["/home/robo/eConsult-Insight/frontend/src/GetLink.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport './App.css'\r\nimport DashBoard from \"./dashboard\";\r\n\r\n\r\nconst GetLink = () => {\r\n    const [link, setLink] = useState('');\r\n    const [isProcessing, setIsProcessing] = useState(false);\r\n    const [result, setresult] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    \r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        \r\n        if (!link) {\r\n            setError(\"Please enter a valid link.\");\r\n            return;\r\n        }\r\n\r\n        setError(null);\r\n        setIsProcessing(true); \r\n        setresult(null); \r\n        \r\n        console.log(\"Submitting link for analysis:\", link);\r\n        \r\n        const formData = new FormData();\r\n        formData.append(\"text\", link);\r\n\r\n        try {\r\n            const endpoint = \"http://0.0.0.0:8000/upload/\";\r\n            const response = await fetch(endpoint, {\r\n                method: \"POST\",\r\n                body: formData\r\n            });\r\n\r\n            if (response.ok) {\r\n                console.log(\"Link submitted successfully. Awaiting processing.\");\r\n            } else {\r\n                const errorText = await response.text();\r\n                throw new Error(`Server failed to process link: ${errorText}`);\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Submission error:\", err);\r\n            setError(`Failed to submit link. Please check your network. (${err.message})`);\r\n            setIsProcessing(false); // Stop processing state on failure\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isProcessing) {\r\n            const fetchProcessedResult = async () => {\r\n                try {\r\n                    const response = await fetch('http://0.0.0.0:8000/result/');\r\n                    \r\n                    if (!response.ok) {\r\n                         throw new Error(`Failed to fetch processed result: ${response.statusText}`);\r\n                    }\r\n                    \r\n                    const result = await response.json(); \r\n                    \r\n                    // 'result' is a JSON file like: \r\n                    // {wordcount:{word:count}, sentiment:{+:val, -:val, 0:val}, important_rare:[comment1,...]}\r\n                    setresult(result); \r\n                    setIsProcessing(false); \r\n                    console.log(\"Structured data fetched:\", result);\r\n\r\n                } catch (err) {\r\n                    console.error('Error fetching structured data:', err);\r\n                    setError(`Error retrieving result. Expected JSON data but received an error: ${err.message}`);\r\n                    setIsProcessing(false);\r\n                }\r\n            };\r\n            \r\n            fetchProcessedResult();\r\n        }\r\n    }, [isProcessing]);\r\n\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"error-message\">\r\n                <h1>Error</h1>\r\n                <p>{error}</p>\r\n                <button onClick={() => { setIsProcessing(false); setError(null); setLink(''); }}>Try Again</button>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n    if (isProcessing) {\r\n        return (\r\n            <div className=\"processing\">\r\n                <h1>Please wait while we process your comments...</h1>\r\n                <div className=\"spinner\" /> \r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (result) {\r\n        return (\r\n            <div>\r\n                <DashBoard obj={result} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div>\r\n           <div> <h1> Paste the link of website that has the comments </h1></div>\r\n            \r\n            <form onSubmit={handleSubmit}>\r\n                <div className = \"textbox\">\r\n                <input\r\n                    type=\"url\"\r\n                    value={link}\r\n                    onChange={(e) => setLink(e.target.value)}\r\n                    placeholder=\"e.g., https://example.com/page-with-comments\"\r\n                    required\r\n                />\r\n                </div>\r\n                <button type=\"submit\">Analyze Comments</button>\r\n            </form>\r\n            \r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GetLink;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}